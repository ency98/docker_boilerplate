As is this repo is ready to deploy. Just clone the repo and change all instaces of "teleport.example.com" with your public dns entry. 


########
Step 1
######## 
## DNS
# Internal DNS
My internal DNS entry is pointed to my public facing NGINX proxy manager server I use "teleport.encyapps.com"

https IP_of_docker_host :3080 

# Internal DNS
External DNS is pointed to my public facing NGINX proxy manager server I use "teleport.encyapps.com"

my setup looks like this

Public DNS >> proxy server >> Public Zerotier GW >> Internal Zerotier GW >> DMZ proxy server >> Firewall >> DMZ NGINX >> Firewall >> Authentik >> docker host > Teleport container
Hover.com     redir                                                                   redir         UFW/iptables    NPM      UFW/IPtables

########
Step 2
########

In your docker directory create this folder structire or clone this repo.

docker
- teleport
-- data_dir
-- config

########
Step 3
########

From the teleport directory 

## Generate base config file. Or copy and edit the one provided. 
docker run --hostname localhost --rm --entrypoint=/usr/local/bin/teleport public.ecr.aws/gravitational/teleport-distroless:14.2.1 configure --roles=proxy,auth > ./config/teleport.yaml

I recomend you use my config file as it was a bitch to figure out what missing pices were needed. 

########
Step 4
########

edit and run the docker compose file or .env in the teleport directory as needed. 

########
Step 5
########

## Add user
docker exec teleport tctl users add bwilsonadmin --roles=editor,access --logins=root,ubuntu,bwilsonadmin,bwilson,ency98@gmail.com

Copy the URL generated and log in to teleport. 

### Not finished figuring it out
## Windows RDP 
# export cert from teleport
curl -o teleport.cer https://teleport.encyapps.com/webapi/auth/export?type=windows

# Generate token
docker exec teleport tctl tokens add --type=windowsdesktop
